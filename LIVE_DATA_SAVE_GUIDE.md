# ğŸ’¾ æŠ–éŸ³ç›´æ’­æ•°æ®ä¿å­˜ä¸åˆ†ææŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¸¦æ•°æ®ä¿å­˜çš„ç›´æ’­ç›‘å¬

```bash
# åŸºæœ¬ä½¿ç”¨ï¼ˆæ•°æ®ä¿å­˜åˆ°é»˜è®¤ç›®å½•ï¼‰
python live_monitor_with_save.py 81804234251

# æŒ‡å®šä¿å­˜è·¯å¾„
python live_monitor_with_save.py 81804234251 --save-path ./my_live_data

# ç›‘å¬URL
python live_monitor_with_save.py https://live.douyin.com/81804234251
```

### 2. æ•°æ®åˆ†æ

```bash
# åˆ†æä¿å­˜çš„æ•°æ®
python live_data_analyzer.py ./live_data_81804234251

# ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
python live_data_analyzer.py ./live_data_81804234251 --output report.txt

# å¯¼å‡ºExcelæ–‡ä»¶
python live_data_analyzer.py ./live_data_81804234251 --excel analysis.xlsx
```

## ğŸ“ æ•°æ®ä¿å­˜ç»“æ„

```
live_data_81804234251/
â”œâ”€â”€ live_messages_20241201_143022.json    # æ¶ˆæ¯æ•°æ®æ–‡ä»¶
â”œâ”€â”€ live_stats.json                       # ç»Ÿè®¡æ•°æ®æ–‡ä»¶
â”œâ”€â”€ analysis_report.txt                   # åˆ†ææŠ¥å‘Š
â””â”€â”€ live_analysis.xlsx                    # Excelåˆ†ææ–‡ä»¶
```

## ğŸ“Š ä¿å­˜çš„æ•°æ®ç±»å‹

### 1. æ¶ˆæ¯æ•°æ® (live_messages_*.json)
æ¯æ¡æ¶ˆæ¯åŒ…å«ï¼š
- `timestamp`: æ—¶é—´æˆ³
- `type`: æ¶ˆæ¯ç±»å‹
- `data`: å…·ä½“æ•°æ®

**æ¶ˆæ¯ç±»å‹**ï¼š
- `message`: å¼¹å¹•æ¶ˆæ¯
- `gift`: ç¤¼ç‰©æ¶ˆæ¯
- `enter`: ç”¨æˆ·è¿›å…¥
- `like`: ç‚¹èµæ¶ˆæ¯
- `follow`: å…³æ³¨æ¶ˆæ¯
- `room_stats`: æˆ¿é—´ç»Ÿè®¡

### 2. ç»Ÿè®¡æ•°æ® (live_stats.json)
åŒ…å«ï¼š
- å¼€å§‹/ç»“æŸæ—¶é—´
- æ€»æ¶ˆæ¯æ•°ã€ç¤¼ç‰©æ•°ã€ç‚¹èµæ•°ç­‰
- ç‹¬ç«‹ç”¨æˆ·æ•°
- æœ€æ´»è·ƒç”¨æˆ·
- æœ€å¤§ç¤¼ç‰©è´¡çŒ®è€…

## ğŸ” æ•°æ®åˆ†æåŠŸèƒ½

### 1. åŸºç¡€ç»Ÿè®¡
- æ¶ˆæ¯æ€»æ•°å’Œç±»å‹åˆ†å¸ƒ
- ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ
- æ—¶é—´åˆ†å¸ƒç»Ÿè®¡

### 2. ç”¨æˆ·åˆ†æ
- æœ€æ´»è·ƒèŠå¤©ç”¨æˆ·
- æœ€å¤§ç¤¼ç‰©è´¡çŒ®è€…
- ç”¨æˆ·å‚ä¸åº¦åˆ†æ

### 3. ç¤¼ç‰©åˆ†æ
- ç¤¼ç‰©ç±»å‹ç»Ÿè®¡
- ç¤¼ç‰©æ—¶é—´çº¿
- ç¤¼ç‰©è´¡çŒ®æ’è¡Œ

### 4. æ—¶é—´åˆ†æ
- æŒ‰å°æ—¶çš„æ¶ˆæ¯åˆ†å¸ƒ
- æ´»è·ƒæ—¶é—´æ®µè¯†åˆ«

## ğŸ“ˆ ä½¿ç”¨ç¤ºä¾‹

### ç›‘å¬å¹¶ä¿å­˜æ•°æ®

```bash
# å¼€å§‹ç›‘å¬
python live_monitor_with_save.py 81804234251

# ç¨‹åºä¼šæ˜¾ç¤ºï¼š
# ğŸ¯ ç›‘å¬ç›´æ’­é—´ID: 81804234251
# âœ… è®¤è¯é…ç½®æˆåŠŸï¼
# ğŸ“ æ•°æ®ä¿å­˜è·¯å¾„: live_data_81804234251
# ğŸ“„ æ¶ˆæ¯æ–‡ä»¶: live_data_81804234251/live_messages_20241201_143022.json
# ğŸš€ å¼€å§‹ç›‘å¬ç›´æ’­é—´ 81804234251...
```

### åˆ†æä¿å­˜çš„æ•°æ®

```bash
# åŸºç¡€åˆ†æ
python live_data_analyzer.py live_data_81804234251

# è¾“å‡ºç¤ºä¾‹ï¼š
# ============================================================
# ğŸ“Š æŠ–éŸ³ç›´æ’­æ•°æ®åˆ†ææŠ¥å‘Š
# ============================================================
# â° å¼€å§‹æ—¶é—´: 2024-12-01T14:30:22
# â° ç»“æŸæ—¶é—´: 2024-12-01T15:45:33
# ğŸ‘¥ ç‹¬ç«‹ç”¨æˆ·æ•°: 156
# ğŸ’¬ æ€»æ¶ˆæ¯æ•°: 1234
# 
# ğŸ“ˆ æ¶ˆæ¯ç±»å‹ç»Ÿè®¡:
#   message: 856 (69.4%)
#   gift: 234 (19.0%)
#   enter: 89 (7.2%)
#   like: 45 (3.6%)
#   follow: 10 (0.8%)
```

## ğŸ› ï¸ é«˜çº§åŠŸèƒ½

### 1. è‡ªå®šä¹‰ä¿å­˜è·¯å¾„

```bash
# ä¿å­˜åˆ°æŒ‡å®šç›®å½•
python live_monitor_with_save.py 81804234251 --save-path /path/to/save
```

### 2. æ‰¹é‡åˆ†æå¤šä¸ªç›´æ’­é—´

```bash
# åˆ†æå¤šä¸ªæ•°æ®ç›®å½•
for dir in live_data_*; do
    echo "åˆ†æ $dir"
    python live_data_analyzer.py "$dir" --output "${dir}_report.txt"
done
```

### 3. å®æ—¶ç›‘æ§è„šæœ¬

```bash
#!/bin/bash
# åˆ›å»ºç›‘æ§è„šæœ¬ monitor.sh

LIVE_ID="81804234251"
SAVE_DIR="./live_data_$(date +%Y%m%d_%H%M%S)"

echo "å¼€å§‹ç›‘å¬ç›´æ’­é—´ $LIVE_ID"
python live_monitor_with_save.py "$LIVE_ID" --save-path "$SAVE_DIR"

echo "å¼€å§‹åˆ†ææ•°æ®"
python live_data_analyzer.py "$SAVE_DIR" --excel "${SAVE_DIR}/analysis.xlsx"

echo "åˆ†æå®Œæˆï¼Œæ•°æ®ä¿å­˜åœ¨: $SAVE_DIR"
```

## ğŸ“Š Excelå¯¼å‡ºå†…å®¹

å¯¼å‡ºçš„Excelæ–‡ä»¶åŒ…å«ä»¥ä¸‹å·¥ä½œè¡¨ï¼š

1. **æ¶ˆæ¯ç±»å‹ç»Ÿè®¡**: å„ç§æ¶ˆæ¯ç±»å‹çš„æ•°é‡ç»Ÿè®¡
2. **æœ€æ´»è·ƒç”¨æˆ·**: å‘é€æ¶ˆæ¯æœ€å¤šçš„ç”¨æˆ·æ’è¡Œ
3. **ç¤¼ç‰©ç»Ÿè®¡**: å„ç§ç¤¼ç‰©çš„æ•°é‡ç»Ÿè®¡
4. **ç¤¼ç‰©è´¡çŒ®è€…**: é€å‡ºç¤¼ç‰©æœ€å¤šçš„ç”¨æˆ·æ’è¡Œ
5. **æ—¶é—´åˆ†å¸ƒ**: æŒ‰å°æ—¶çš„æ¶ˆæ¯åˆ†å¸ƒ
6. **ç¤¼ç‰©æ—¶é—´çº¿**: ç¤¼ç‰©çš„è¯¦ç»†æ—¶é—´çº¿æ•°æ®

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®éšç§**: è¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œä¸è¦æ³„éœ²ç”¨æˆ·éšç§
2. **å­˜å‚¨ç©ºé—´**: é•¿æ—¶é—´ç›‘å¬ä¼šäº§ç”Ÿå¤§é‡æ•°æ®ï¼Œæ³¨æ„ç£ç›˜ç©ºé—´
3. **ç½‘ç»œç¨³å®š**: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®šï¼Œé¿å…æ•°æ®ä¸¢å¤±
4. **æ–‡ä»¶æƒé™**: ç¡®ä¿ç¨‹åºæœ‰å†™å…¥æƒé™
5. **æ•°æ®å¤‡ä»½**: å®šæœŸå¤‡ä»½é‡è¦æ•°æ®

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜ï¼š

1. **æ— æ³•ä¿å­˜æ•°æ®**
   ```
   âŒ é”™è¯¯: Permission denied
   ```
   - è§£å†³ï¼šæ£€æŸ¥ç›®å½•å†™å…¥æƒé™

2. **Excelå¯¼å‡ºå¤±è´¥**
   ```
   âŒ éœ€è¦å®‰è£…pandaså’Œopenpyxl
   ```
   - è§£å†³ï¼š`pip install pandas openpyxl`

3. **æ•°æ®æ–‡ä»¶æŸå**
   ```
   âŒ æ²¡æœ‰æ‰¾åˆ°æ¶ˆæ¯æ•°æ®
   ```
   - è§£å†³ï¼šæ£€æŸ¥JSONæ–‡ä»¶æ ¼å¼ï¼Œåˆ é™¤æŸåçš„è¡Œ

### æ£€æŸ¥æ•°æ®å®Œæ•´æ€§ï¼š

```bash
# æ£€æŸ¥æ¶ˆæ¯æ–‡ä»¶
python -c "
import json
with open('live_data_81804234251/live_messages_*.json', 'r') as f:
    count = 0
    for line in f:
        try:
            json.loads(line)
            count += 1
        except:
            pass
    print(f'æœ‰æ•ˆæ¶ˆæ¯æ•°: {count}')
"
```

## ğŸ“ æ•°æ®æ ¼å¼è¯´æ˜

### æ¶ˆæ¯æ•°æ®æ ¼å¼ç¤ºä¾‹ï¼š

```json
{
  "timestamp": "2024-12-01T14:30:22.123456",
  "type": "message",
  "data": {
    "user_id": "MS4wLjABAAAA...",
    "user_name": "ç”¨æˆ·å",
    "content": "å¼¹å¹•å†…å®¹"
  }
}
```

### ç»Ÿè®¡æ•°æ®æ ¼å¼ç¤ºä¾‹ï¼š

```json
{
  "start_time": "2024-12-01T14:30:22.123456",
  "end_time": "2024-12-01T15:45:33.654321",
  "total_messages": 1234,
  "total_gifts": 234,
  "total_likes": 45,
  "unique_users": ["MS4wLjABAAAA...", "..."],
  "top_chatters": {"MS4wLjABAAAA...": 15, "..."},
  "top_gifters": {"MS4wLjABAAAA...": 8, "..."}
}
```

è¿™æ ·ä½ å°±å¯ä»¥å®Œæ•´åœ°ç›‘å¬ã€ä¿å­˜å’Œåˆ†ææŠ–éŸ³ç›´æ’­æ•°æ®äº†ï¼
